---
interface Props {
  fecha: string;
  pagos: {
    id: string;
    nombre_pagador: string;
    fecha_pago: string;
    monto: number;
    realizo_pago: boolean;
  }[];
}

const { fecha, pagos } = Astro.props;
---

<section class="flex flex-col gap-3">
  <h3 class="text-xl font-medium text-gray-800 dark:text-gray-200">{fecha}</h3>
  <div
    class="relative overflow-x-auto sm:overflow-x-visible border border-gray-300 rounded-lg shadow-lg"
  >
    <table class="w-full min-w-full bg-white rounded-lg overflow-hidden">
      <thead class="bg-gray-200 rounded-t-lg">
        <tr class="text-gray-800">
          <th class="px-4 py-2 text-center text-sm sm:text-base">Acciones</th>
          <th class="px-4 py-2 text-left text-sm sm:text-base"
            >Nombre Pagador</th
          >
          <th class="px-4 py-2 text-left text-sm sm:text-base">Monto</th>
          <th class="px-4 py-2 text-center text-sm sm:text-base"
            >Realizó Pago</th
          >
        </tr>
      </thead>
      <tbody class="rounded-b-lg">
        {
          pagos.map((pago) => {
            const payment = {
              id: pago.id ?? "-",
              nombre_pagador: pago.nombre_pagador ?? "-",
              monto: pago.monto ?? "-",
              realizo_pago: pago.realizo_pago ? "Sí pagó" : "Aún no",
            };

            return (
              <tr class="odd:bg-gray-50 even:bg-white hover:bg-gray-100 transition-colors duration-200">
                <td class="px-4 py-2 text-center">
                  <button
                    type="button"
                    class="flex items-center justify-center px-2 py-1 rounded transition-all
                      underline text-blue-700 hover:text-white focus:text-white
                      bg-transparent hover:bg-blue-500 focus:bg-blue-600
                      ring-2 ring-transparent hover:ring-blue-300 focus:ring-4"
                  >
                    Editar
                  </button>
                </td>
                <td class="px-4 py-2 text-sm sm:text-base">
                  {payment.nombre_pagador}
                </td>
                <td class="px-4 py-2 text-sm sm:text-base">
                  S/.{parseFloat(payment.monto.toString()).toFixed(2)}
                </td>
                <td
                  class={`px-4 py-2 font-medium text-center text-sm sm:text-base
                        ${
                          payment.realizo_pago === "Sí pagó"
                            ? "text-green-800 bg-green-300"
                            : "text-red-800 bg-red-300"
                        }`}
                >
                  {payment.realizo_pago}
                </td>
              </tr>
            );
          })
        }
      </tbody>
    </table>
  </div>
</section>
